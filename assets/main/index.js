System.register("chunks:///_virtual/Apple.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,i,r,u,a,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,a=t.CCInteger,s=t.Component}],execute:function(){var c,p,l,h,f,y,d;r._RF.push({},"247ebv7AvBBbqcZ8tqRmosS","Apple",void 0);var g=u.ccclass,m=u.property,v=-350,b=250;t("Apple",(c=g("Apple"),p=m({type:a}),l=m({type:a}),c((y=n((f=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,o(n,"xCount",y,i(n)),o(n,"yCount",d,i(n)),n}e(n,t);var r=n.prototype;return r.start=function(){var t;(t=this.node).setPosition.apply(t,this.getPositionByNumber(this.xCount,this.yCount))},r.catch=function(){var t=this;setTimeout((function(){var n;(n=t.node).setPosition.apply(n,t.getRandomPosition())}),1)},r.getRandomInt=function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1)+t)},r.getRandomPosition=function(){var t,n;do{n=this.getRandomInt(0,7),t=this.getRandomInt(0,5)}while(t===this.xCount&&n===this.yCount);return this.getPositionByNumber(n,t)},r.getPositionByNumber=function(t,n){return[100*t+v,b-100*n]},r.update=function(t){},n}(s)).prototype,"xCount",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=n(f.prototype,"yCount",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=f))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var n,t,i,o,r,a,s,l,c,h,p,u,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,l=e.Label,c=e.systemEvent,h=e.SystemEvent,p=e.BoxCollider2D,u=e.Contact2DType,d=e.Component}],execute:function(){var y,k,f,w,C,D,b,m;r._RF.push({},"de923k4/UNDDbANN8FYLcS0","GameController",void 0);var g=a.ccclass,v=a.property;e("GameController",(y=g("GameController"),k=v({type:s}),f=v({type:l}),y((D=n((C=function(e){function n(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return n=e.call.apply(e,[this].concat(r))||this,i(n,"speed",D,o(n)),i(n,"snakeNode",b,o(n)),i(n,"scoreLabel",m,o(n)),n.direction=0,n.newDirection=0,n.snakeCollider=null,n.Snake=null,n.score=0,n}t(n,e);var r=n.prototype;return r.onLoad=function(){var e=this;c.on(h.EventType.KEY_DOWN,this.keyDown,this),c.on(s.EventType.TOUCH_MOVE,(function(n){return e.onMoveHandler(n)}),this)},r.start=function(){this.snakeCollider=this.snakeNode.getComponent(p),this.Snake=this.snakeNode.getComponent("Snake"),this.snakeCollider&&this.snakeCollider.on(u.BEGIN_CONTACT,this.onBeginContact,this)},r.onMoveHandler=function(e){var n=e.getDelta(),t=Math.abs(n.x)>Math.abs(n.y);n.x>1&&t?this.newDirection=3:n.x<-1&&t?this.newDirection=1:n.y>1&&!t?this.newDirection=2:n.y<-1&&!t&&(this.newDirection=4)},r.onBeginContact=function(e,n,t){"apple"==n.node.name&&(n.node.getComponent("Apple").catch(),this.score+=1,this.scoreLabel.string="Score: "+this.score);"wall_left"!=n.node.name&&"wall_top"!=n.node.name&&"wall_right"!=n.node.name&&"wall_bottom"!=n.node.name||console.log("Столкновение со стеной!")},r.keyDown=function(e){switch(e.keyCode){case 37:this.newDirection=1;break;case 38:this.newDirection=2;break;case 39:this.newDirection=3;break;case 40:this.newDirection=4}},r.update=function(e){if(this.newDirection!==this.direction){var n=this.snakeNode.position.x,t=this.snakeNode.position.y;this.Snake.isCenterCell(n,t)&&(this.direction=this.newDirection,this.Snake.alignSnake(n,t),this.Snake.changeVelocity(this.speed,this.direction))}},n}(d)).prototype,"speed",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),b=n(C.prototype,"snakeNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(C.prototype,"scoreLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Apple.ts","./GameController.ts","./Snake.ts"],(function(){"use strict";return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Snake.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){"use strict";var t,e,i,o,r,s;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,i=n._decorator,o=n.BoxCollider2D,r=n.RigidBody2D,s=n.Component}],execute:function(){var a;e._RF.push({},"063ecWTjstIvbGDPXBrKi3e","Snake",void 0);var c=i.ccclass;i.property,n("Snake",c("Snake")(a=function(n){function e(){for(var t,e=arguments.length,i=new Array(e),o=0;o<e;o++)i[o]=arguments[o];return(t=n.call.apply(n,[this].concat(i))||this).snakeRigidBody=null,t.snakeCollider=null,t}t(e,n);var i=e.prototype;return i.start=function(){this.snakeCollider=this.node.getComponent(o),this.snakeRigidBody=this.node.getComponent(r)},i.isCenterCell=function(n,t,e){void 0===e&&(e=5);var i=this.getMinDiff([-350,-250,-150,-50,50,150,250,350],n)[0],o=this.getMinDiff([250,150,50,-50,-150,-250],t)[0];return i<e&&o<e},i.changeVelocity=function(n,t){var e=0,i=0;1===t&&(e=-n),2===t&&(i=n),3===t&&(e=n),4===t&&(i=-n),this.snakeRigidBody.linearVelocity={x:e,y:i}},i.alignSnake=function(n,t){var e=this.getMinDiff([-350,-250,-150,-50,50,150,250,350],n)[1],i=this.getMinDiff([250,150,50,-50,-150,-250],t)[1];this.node.setPosition(e,i)},i.getMinDiff=function(n,t){for(var e,i=1e3,o=0;o<n.length;o++){var r=Math.abs(n[o]-t);r<i&&(i=r,e=n[o])}return[i,e]},e}(s))||a);e._RF.pop()}}}));
