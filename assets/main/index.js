System.register("chunks:///_virtual/Apple.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var n,e,o,i,r,u,a,s;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,a=t.CCInteger,s=t.Component}],execute:function(){var c,p,l,h,f,y,d;r._RF.push({},"247ebv7AvBBbqcZ8tqRmosS","Apple",void 0);var g=u.ccclass,m=u.property,v=-350,b=250;t("Apple",(c=g("Apple"),p=m({type:a}),l=m({type:a}),c((y=n((f=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return n=t.call.apply(t,[this].concat(r))||this,o(n,"xCount",y,i(n)),o(n,"yCount",d,i(n)),n}e(n,t);var r=n.prototype;return r.start=function(){var t;(t=this.node).setPosition.apply(t,this.getPositionByNumber(this.xCount,this.yCount))},r.catch=function(){var t=this;setTimeout((function(){var n;(n=t.node).setPosition.apply(n,t.getRandomPosition())}),1)},r.getRandomInt=function(t,n){return t=Math.ceil(t),n=Math.floor(n),Math.floor(Math.random()*(n-t+1)+t)},r.getRandomPosition=function(){var t,n;do{n=this.getRandomInt(0,7),t=this.getRandomInt(0,5)}while(t===this.xCount&&n===this.yCount);return this.getPositionByNumber(n,t)},r.getPositionByNumber=function(t,n){return[100*t+v,b-100*n]},r.update=function(t){},n}(s)).prototype,"xCount",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),d=n(f.prototype,"yCount",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),h=f))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./Apple.ts","./PlayerController.ts"],(function(){"use strict";return{setters:[null,null],execute:function(){}}}));

System.register("chunks:///_virtual/PlayerController.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var i,t,n,o,r,l,s,c,a,h,d,u,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.RigidBody2D,c=e.BoxCollider2D,a=e.Label,h=e.systemEvent,d=e.SystemEvent,u=e.Contact2DType,p=e.Component}],execute:function(){var y,f,g,D,b,C,w,v,B,m;r._RF.push({},"de923k4/UNDDbANN8FYLcS0","PlayerController",void 0);var k=l.ccclass,_=l.property;e("PlayerController",(y=k("PlayerController"),f=_({type:s}),g=_({type:c}),D=_({type:a}),y((w=i((C=function(e){function i(){for(var i,t=arguments.length,r=new Array(t),l=0;l<t;l++)r[l]=arguments[l];return i=e.call.apply(e,[this].concat(r))||this,n(i,"speed",w,o(i)),i.direction=0,i.newDirection=0,n(i,"rigidBody",v,o(i)),n(i,"collider",B,o(i)),n(i,"scoreLabel",m,o(i)),i.score=0,i}t(i,e);var r=i.prototype;return r.onLoad=function(){h.on(d.EventType.KEY_DOWN,this.keyDown,this),h.on(d.EventType.KEY_UP,this.keyUp,this)},r.start=function(){this.collider&&this.collider.on(u.BEGIN_CONTACT,this.onBeginContact,this)},r.onBeginContact=function(e,i,t){"apple<BoxCollider2D>"==i.name&&(i.node.getComponent("Apple").catch(),this.score+=1,this.scoreLabel.string="Score: "+this.score);"wall_left<BoxCollider2D>"!=i.name&&"wall_top<BoxCollider2D>"!=i.name&&"wall_right<BoxCollider2D>"!=i.name&&"wall_bottom<BoxCollider2D>"!=i.name||console.log("Столкновение со стеной!")},r.keyDown=function(e){switch(e.keyCode){case 37:this.newDirection=1;break;case 38:this.newDirection=2;break;case 39:this.newDirection=3;break;case 40:this.newDirection=4}},r.keyUp=function(e){},r.update=function(e){if(this.newDirection!==this.direction){var i=this.rigidBody.node.position.x,t=this.rigidBody.node.position.y;this.isCenterCell(i,t)&&(this.alignSnake(i,t),this.changeVelocity())}},r.isCenterCell=function(e,i,t){void 0===t&&(t=5);var n=this.getMinDiff([-350,-250,-150,-50,50,150,250,350],e)[0],o=this.getMinDiff([250,150,50,-50,-150,-250],i)[0];return n<t&&o<t},r.changeVelocity=function(){this.direction=this.newDirection;var e=0,i=0;1===this.direction&&(e=-this.speed),2===this.direction&&(i=this.speed),3===this.direction&&(e=this.speed),4===this.direction&&(i=-this.speed),this.rigidBody.linearVelocity={x:e,y:i}},r.alignSnake=function(e,i){var t=this.getMinDiff([-350,-250,-150,-50,50,150,250,350],e)[1],n=this.getMinDiff([250,150,50,-50,-150,-250],i)[1];this.rigidBody.node.setPosition(t,n)},r.getMinDiff=function(e,i){for(var t,n=1e3,o=0;o<e.length;o++){var r=Math.abs(e[o]-i);r<n&&(n=r,t=e[o])}return[n,t]},i}(p)).prototype,"speed",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),v=i(C.prototype,"rigidBody",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i(C.prototype,"collider",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(C.prototype,"scoreLabel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=C))||b));r._RF.pop()}}}));
